Traceback (most recent call last):
  File "/Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages/jupyter_core/utils/__init__.py", line 154, in wrapped
    asyncio.get_running_loop()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
RuntimeError: no running event loop

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages/jupyter_cache/executors/utils.py", line 58, in single_nb_execution
    executenb(
    ~~~~~~~~~^
        nb,
        ^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    )
    ^
  File "/Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages/nbclient/client.py", line 1319, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages/jupyter_core/utils/__init__.py", line 158, in wrapped
    return loop.run_until_complete(inner)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/asyncio/base_events.py", line 721, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "/Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages/nbclient/client.py", line 709, in async_execute
    await self.async_execute_cell(
        cell, index, execution_count=self.code_cells_executed + 1
    )
  File "/Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages/nbclient/client.py", line 1062, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "/Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages/nbclient/client.py", line 918, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
# Install StarDist and dependencies (run once)
!pip install stardist csbdeep

# Imports
from stardist.models import StarDist2D
from csbdeep.utils import normalize
from skimage.io import imread, imshow
import matplotlib.pyplot as plt
------------------

----- stdout -----
Collecting stardist
  Using cached stardist-0.9.1.tar.gz (888 kB)
----- stdout -----
  Installing build dependencies ... [?25l-
----- stdout -----
 \
----- stdout -----
 |
----- stdout -----
 /
----- stdout -----
 -
----- stdout -----
 done
----- stdout -----
[?25h  Getting requirements to build wheel ... [?25l-
----- stdout -----
 done
----- stdout -----
[?25h  Preparing metadata (pyproject.toml) ... [?25l-
----- stdout -----
 done
[?25hCollecting csbdeep
----- stdout -----
  Using cached csbdeep-0.8.1-py2.py3-none-any.whl.metadata (2.4 kB)
Requirement already satisfied: scikit-image in /Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages (from stardist) (0.25.2)
----- stdout -----
Collecting numba (from stardist)
  Using cached numba-0.61.2-cp313-cp313-macosx_11_0_arm64.whl.metadata (2.7 kB)
Requirement already satisfied: imageio in /Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages (from stardist) (2.37.0)
Requirement already satisfied: numpy in /Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages (from csbdeep) (2.2.6)
Requirement already satisfied: scipy in /Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages (from csbdeep) (1.15.3)
Requirement already satisfied: matplotlib in /Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages (from csbdeep) (3.10.3)
Requirement already satisfied: six in /Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages (from csbdeep) (1.17.0)
Requirement already satisfied: tifffile in /Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages (from csbdeep) (2025.5.26)
Requirement already satisfied: tqdm in /Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages (from csbdeep) (4.67.1)
Requirement already satisfied: packaging in /Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages (from csbdeep) (25.0)
Requirement already satisfied: pillow>=8.3.2 in /Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages (from imageio->stardist) (11.2.1)
Requirement already satisfied: contourpy>=1.0.1 in /Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages (from matplotlib->csbdeep) (1.3.2)
Requirement already satisfied: cycler>=0.10 in /Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages (from matplotlib->csbdeep) (0.12.1)
Requirement already satisfied: fonttools>=4.22.0 in /Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages (from matplotlib->csbdeep) (4.58.1)
Requirement already satisfied: kiwisolver>=1.3.1 in /Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages (from matplotlib->csbdeep) (1.4.8)
Requirement already satisfied: pyparsing>=2.3.1 in /Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages (from matplotlib->csbdeep) (3.2.3)
Requirement already satisfied: python-dateutil>=2.7 in /Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages (from matplotlib->csbdeep) (2.9.0.post0)
----- stdout -----
Collecting llvmlite<0.45,>=0.44.0dev0 (from numba->stardist)
  Using cached llvmlite-0.44.0-cp313-cp313-macosx_11_0_arm64.whl.metadata (4.8 kB)
Requirement already satisfied: networkx>=3.0 in /Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages (from scikit-image->stardist) (3.5)
Requirement already satisfied: lazy-loader>=0.4 in /Users/ranit/anaconda3/envs/gbi-python-env/lib/python3.13/site-packages (from scikit-image->stardist) (0.4)
Using cached csbdeep-0.8.1-py2.py3-none-any.whl (71 kB)
Using cached numba-0.61.2-cp313-cp313-macosx_11_0_arm64.whl (2.8 MB)
Using cached llvmlite-0.44.0-cp313-cp313-macosx_11_0_arm64.whl (26.2 MB)
----- stdout -----
Building wheels for collected packages: stardist
----- stdout -----
  Building wheel for stardist (pyproject.toml) ... [?25l-
----- stdout -----
 \
----- stdout -----
 |
----- stdout -----
 error
  [1;31merror[0m: [1msubprocess-exited-with-error[0m
  
  [31mÃ—[0m [32mBuilding wheel for stardist [0m[1;32m([0m[32mpyproject.toml[0m[1;32m)[0m did not run successfully.
  [31mâ”‚[0m exit code: [1;36m1[0m
  [31mâ•°â”€>[0m [31m[77 lines of output][0m
  [31m   [0m /private/var/folders/5t/3zkcp0dd27s3txcmjn8jl96m0000gq/T/pip-build-env-vkh0gjb6/overlay/lib/python3.13/site-packages/setuptools/dist.py:759: SetuptoolsDeprecationWarning: License classifiers are deprecated.
  [31m   [0m !!
  [31m   [0m 
  [31m   [0m         ********************************************************************************
  [31m   [0m         Please consider removing the following classifiers in favor of a SPDX license expression:
  [31m   [0m 
  [31m   [0m         License :: OSI Approved :: BSD License
  [31m   [0m 
  [31m   [0m         See https://packaging.python.org/en/latest/guides/writing-pyproject-toml/#license for details.
  [31m   [0m         ********************************************************************************
  [31m   [0m 
  [31m   [0m !!
  [31m   [0m   self._finalize_license_expression()
  [31m   [0m running bdist_wheel
  [31m   [0m running build
  [31m   [0m running build_py
  [31m   [0m creating build/lib.macosx-11.1-arm64-cpython-313/stardist
  [31m   [0m copying stardist/version.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist
  [31m   [0m copying stardist/rays3d.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist
  [31m   [0m copying stardist/sample_patches.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist
  [31m   [0m copying stardist/nms.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist
  [31m   [0m copying stardist/__init__.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist
  [31m   [0m copying stardist/matching.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist
  [31m   [0m copying stardist/bioimageio_utils.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist
  [31m   [0m copying stardist/utils.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist
  [31m   [0m copying stardist/big.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist
  [31m   [0m creating build/lib.macosx-11.1-arm64-cpython-313/stardist/plot
  [31m   [0m copying stardist/plot/plot.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist/plot
  [31m   [0m copying stardist/plot/render.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist/plot
  [31m   [0m copying stardist/plot/__init__.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist/plot
  [31m   [0m creating build/lib.macosx-11.1-arm64-cpython-313/stardist/models
  [31m   [0m copying stardist/models/model3d.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist/models
  [31m   [0m copying stardist/models/model2d.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist/models
  [31m   [0m copying stardist/models/__init__.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist/models
  [31m   [0m copying stardist/models/base.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist/models
  [31m   [0m creating build/lib.macosx-11.1-arm64-cpython-313/stardist/scripts
  [31m   [0m copying stardist/scripts/__init__.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist/scripts
  [31m   [0m copying stardist/scripts/predict2d.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist/scripts
  [31m   [0m copying stardist/scripts/predict3d.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist/scripts
  [31m   [0m creating build/lib.macosx-11.1-arm64-cpython-313/stardist/geometry
  [31m   [0m copying stardist/geometry/__init__.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist/geometry
  [31m   [0m copying stardist/geometry/geom3d.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist/geometry
  [31m   [0m copying stardist/geometry/geom2d.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist/geometry
  [31m   [0m creating build/lib.macosx-11.1-arm64-cpython-313/stardist/data
  [31m   [0m copying stardist/data/__init__.py -> build/lib.macosx-11.1-arm64-cpython-313/stardist/data
  [31m   [0m creating build/lib.macosx-11.1-arm64-cpython-313/stardist/kernels
  [31m   [0m copying stardist/kernels/stardist2d.cl -> build/lib.macosx-11.1-arm64-cpython-313/stardist/kernels
  [31m   [0m copying stardist/kernels/stardist3d.cl -> build/lib.macosx-11.1-arm64-cpython-313/stardist/kernels
  [31m   [0m creating build/lib.macosx-11.1-arm64-cpython-313/stardist/data/images
  [31m   [0m copying stardist/data/images/mask2d.tif -> build/lib.macosx-11.1-arm64-cpython-313/stardist/data/images
  [31m   [0m copying stardist/data/images/mask3d.tif -> build/lib.macosx-11.1-arm64-cpython-313/stardist/data/images
  [31m   [0m copying stardist/data/images/img3d.tif -> build/lib.macosx-11.1-arm64-cpython-313/stardist/data/images
  [31m   [0m copying stardist/data/images/img2d.tif -> build/lib.macosx-11.1-arm64-cpython-313/stardist/data/images
  [31m   [0m copying stardist/data/images/histo.jpg -> build/lib.macosx-11.1-arm64-cpython-313/stardist/data/images
  [31m   [0m running build_ext
  [31m   [0m building 'stardist.lib.stardist2d' extension
  [31m   [0m creating build/temp.macosx-11.1-arm64-cpython-313/stardist/lib/external/clipper
  [31m   [0m clang++ -fno-strict-overflow -Wsign-compare -Wunreachable-code -DNDEBUG -O2 -Wall -fPIC -O2 -isystem /Users/ranit/anaconda3/envs/gbi-python-env/include -arch arm64 -fPIC -O2 -isystem /Users/ranit/anaconda3/envs/gbi-python-env/include -arch arm64 -I/private/var/folders/5t/3zkcp0dd27s3txcmjn8jl96m0000gq/T/pip-build-env-vkh0gjb6/overlay/lib/python3.13/site-packages/numpy/_core/include -Istardist/lib/external/clipper -Istardist/lib/external/nanoflann -I/Users/ranit/anaconda3/envs/gbi-python-env/include/python3.13 -c stardist/lib/external/clipper/clipper.cpp -o build/temp.macosx-11.1-arm64-cpython-313/stardist/lib/external/clipper/clipper.o -std=c++11 -fopenmp
  [31m   [0m clang++: error: unsupported option '-fopenmp'
  [31m   [0m >>> compiling with '-fopenmp' failed
  [31m   [0m building 'stardist.lib.stardist2d' extension
  [31m   [0m clang++ -fno-strict-overflow -Wsign-compare -Wunreachable-code -DNDEBUG -O2 -Wall -fPIC -O2 -isystem /Users/ranit/anaconda3/envs/gbi-python-env/include -arch arm64 -fPIC -O2 -isystem /Users/ranit/anaconda3/envs/gbi-python-env/include -arch arm64 -I/private/var/folders/5t/3zkcp0dd27s3txcmjn8jl96m0000gq/T/pip-build-env-vkh0gjb6/overlay/lib/python3.13/site-packages/numpy/_core/include -Istardist/lib/external/clipper -Istardist/lib/external/nanoflann -I/Users/ranit/anaconda3/envs/gbi-python-env/include/python3.13 -c stardist/lib/external/clipper/clipper.cpp -o build/temp.macosx-11.1-arm64-cpython-313/stardist/lib/external/clipper/clipper.o -std=c++11 -Xpreprocessor -fopenmp
  [31m   [0m In file included from stardist/lib/external/clipper/clipper.cpp:41:
  [31m   [0m stardist/lib/external/clipper/clipper.hpp:52:10: fatal error: 'vector' file not found
  [31m   [0m    52 | #include <vector>
  [31m   [0m       |          ^~~~~~~~
  [31m   [0m 1 error generated.
  [31m   [0m >>> compiling with '-Xpreprocessor -fopenmp' failed
  [31m   [0m >>> compiling with OpenMP support failed, re-trying without
  [31m   [0m building 'stardist.lib.stardist2d' extension
  [31m   [0m clang++ -fno-strict-overflow -Wsign-compare -Wunreachable-code -DNDEBUG -O2 -Wall -fPIC -O2 -isystem /Users/ranit/anaconda3/envs/gbi-python-env/include -arch arm64 -fPIC -O2 -isystem /Users/ranit/anaconda3/envs/gbi-python-env/include -arch arm64 -I/private/var/folders/5t/3zkcp0dd27s3txcmjn8jl96m0000gq/T/pip-build-env-vkh0gjb6/overlay/lib/python3.13/site-packages/numpy/_core/include -Istardist/lib/external/clipper -Istardist/lib/external/nanoflann -I/Users/ranit/anaconda3/envs/gbi-python-env/include/python3.13 -c stardist/lib/external/clipper/clipper.cpp -o build/temp.macosx-11.1-arm64-cpython-313/stardist/lib/external/clipper/clipper.o -std=c++11
  [31m   [0m In file included from stardist/lib/external/clipper/clipper.cpp:41:
  [31m   [0m stardist/lib/external/clipper/clipper.hpp:52:10: fatal error: 'vector' file not found
  [31m   [0m    52 | #include <vector>
  [31m   [0m       |          ^~~~~~~~
  [31m   [0m 1 error generated.
  [31m   [0m error: command '/usr/bin/clang++' failed with exit code 1
  [31m   [0m [31m[end of output][0m
  
  [1;35mnote[0m: This error originates from a subprocess, and is likely not a problem with pip.
[31m  ERROR: Failed building wheel for stardist[0m[31m
[0m[?25hFailed to build stardist
[31mERROR: Failed to build installable wheels for some pyproject.toml based projects (stardist)[0m[31m
[0m
------------------

[31m---------------------------------------------------------------------------[39m
[31mModuleNotFoundError[39m                       Traceback (most recent call last)
[36mCell[39m[36m [39m[32mIn[1][39m[32m, line 5[39m
[32m      2[39m get_ipython().system([33m'[39m[33mpip install stardist csbdeep[39m[33m'[39m)
[32m      4[39m [38;5;66;03m# Imports[39;00m
[32m----> [39m[32m5[39m [38;5;28;01mfrom[39;00m[38;5;250m [39m[34;01mstardist[39;00m[34;01m.[39;00m[34;01mmodels[39;00m[38;5;250m [39m[38;5;28;01mimport[39;00m StarDist2D
[32m      6[39m [38;5;28;01mfrom[39;00m[38;5;250m [39m[34;01mcsbdeep[39;00m[34;01m.[39;00m[34;01mutils[39;00m[38;5;250m [39m[38;5;28;01mimport[39;00m normalize
[32m      7[39m [38;5;28;01mfrom[39;00m[38;5;250m [39m[34;01mskimage[39;00m[34;01m.[39;00m[34;01mio[39;00m[38;5;250m [39m[38;5;28;01mimport[39;00m imread, imshow

[31mModuleNotFoundError[39m: No module named 'stardist'

